# Vs30 config file

# --- Grid Parameters ---
grid_xmin: 1060050
grid_xmax: 2120050
grid_ymin: 4730050
grid_ymax: 6250050
grid_dx: 100
grid_dy: 100

# --- NoData and Placeholder Values ---
id_nodata: 255
slope_nodata: -9999
model_nodata: -32767

# --- filenames and Prefixes ---
posterior_prefix: "posterior_"
terrain_initial_vs30_filename: "initial_terrain_vs30_with_uncertainty.tif"
geology_initial_vs30_filename: "initial_geology_vs30_with_uncertainty.tif"
slope_raster_filename: "slope.tif"
coast_distance_raster_filename: "coast_distance.tif"
geology_vs30_slope_and_coastal_distance_adjusted_filename: "geology_vs30_slope_and_coastal_distance_adjusted_with_uncertainty.tif"
geology_id_filename: "gid.tif"
terrain_id_filename: "tid.tif"

# Final output filenames (after spatially adjusting by the fitted multivariate normal distribution (MVN))
terrain_vs30_mean_stddev_filename: "terrain_vs30_spatially_adjusted_with_uncertainty.tif"
geology_vs30_mean_stddev_filename: "geology_vs30_slope_and_coastal_distance_and_spatially_adjusted_with_uncertainty.tif"
combined_vs30_filename: "weighted_combination_of_geology_vs30_after_slope_and_coastal_distance_and_spatial_adjustment_and_terrain_vs30_after_spatial_adjustment.tif"

# --- General Configuration ---

# Whether to perform Bayesian update of geology and terrain categorical vs30 values
do_bayesian_update_of_geology_and_terrain_categorical_vs30_values: true

# Maximum distance (meters) for considering observations
max_dist_m: 10000

# Maximum number of observations to consider per pixel
max_points: 500

# Covariance reduction factor
cov_reduc: 1.5

# Whether measurements are noisy (affects noise weighting)
noisy: true

# Correlation length parameters (in meters)
phi_geology: 1407
phi_terrain: 993

# Total available memory in GB for chunking
total_memory_gb: 3

# Parameters for Bayesian updates
n_prior: 3  # Assume prior model made up of n_prior measurements
min_sigma: 0.5  # Minimum standard deviation allowed
min_group: 5  # Minimum number of points in a group for DBSCAN update
eps: 15000.0  # Threshold for Bayesian update
nproc: -1  # Number of processors to use (-1 for all)

# Paths relative to the resources directory
observations_file: observations/measured_vs30_original_filtered.csv
output_dir: /tmp/refactored_vs30_output

# Options for geology Vs30 models
geology_mean_and_standard_deviation_per_category_file: categorical_vs30_mean_and_stddev/geology/geology_model_prior_mean_and_standard_deviation.csv

# Options for terrain Vs30 models
terrain_mean_and_standard_deviation_per_category_file: categorical_vs30_mean_and_stddev/terrain/terrain_model_prior_mean_and_standard_deviation.csv

# Method for combining geology and terrain models
# value can be:
# - float: Ratio of geology weight to terrain weight (e.g. 1.0 = equal weight, 2.0 = geology has 2x weight)
# - string: "standard_deviation_weighting" (uses k_value below)
combination_method: 1.0

# K value for standard deviation based weighting
# Represents the exponent for inverse variance weighting: weight ~ (sigma^2)^-k
# Only used if combination_method is "standard_deviation_weighting"
k_value: 3.0

# Model specific ID columns
model_id_columns:
  geology: gid
  terrain: tid

# --- Hybrid Model constants ---
hybrid_mod6_dist_min: 8000.0
hybrid_mod6_dist_max: 20000.0
hybrid_mod6_vs30_min: 240.0
hybrid_mod6_vs30_max: 500.0

hybrid_mod13_dist_min: 8000.0
hybrid_mod13_dist_max: 20000.0
hybrid_mod13_vs30_min: 197.0
hybrid_mod13_vs30_max: 500.0

# --- Misc ---
min_dist_enforced: 0.1
nztm_crs: "EPSG:2193"

# --- Plotting ---
plot_figsize: [12, 8]
plot_dpi: 300


